<!-- Copyright (C) 2017 Linagora

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. -->

<form novalidate [formGroup]="userManagementForm">
  <div fxLayout="column" class="user-form">
    <div fxLayout="column" fxLayoutWrap fxLayoutGap="10px">

      <div fxLayoutAlign="start center" fxLayoutAlign.md="center center" fxLayoutAlign.sm="center center" class="margin-top-x1">
        <md-form-field *ngIf="!user" fxFlex fxFlex.md="50%" fxFlex.sm="50%">
          <input type="text" autocomplete="off" mdInput placeholder="Username" formControlName="username">
          <span mdPrefix><md-icon color="primary">person</md-icon></span>
          <md-error *ngIf="formErrors.username">
            {{ formErrors.username }}
          </md-error>
        </md-form-field>
      </div>

      <div fxLayoutAlign="start center" fxLayoutAlign.md="center center" fxLayoutAlign.sm="center center">
        <md-form-field fxFlex fxFlex.md="50%" fxFlex.sm="50%">
          <input type="text" autocomplete="off" mdInput placeholder="Name" formControlName="name">
          <span mdPrefix><md-icon color="primary">assignment_ind</md-icon></span>
          <md-error *ngIf="formErrors.name">
            {{ formErrors.name }}
          </md-error>
        </md-form-field>
      </div>
      <div fxLayoutAlign="start center" fxLayoutAlign.md="center center" fxLayoutAlign.sm="center center">
        <md-form-field fxFlex fxFlex.md="50%" fxFlex.sm="50%">
          <input type="password" autocomplete="new-password" mdInput placeholder="Password" formControlName="password">
          <span mdPrefix><md-icon color="primary">vpn_key</md-icon></span>
          <md-error *ngIf="formErrors.password">
            {{ formErrors.password }}
          </md-error>
        </md-form-field>
      </div>
    </div>

    <md-action-row class="pnl-actions-user-management"
      fxLayoutAlign="end center"
      fxLayoutAlign.md="center center"
      fxLayoutAlign.sm="center center"
      fxLayout.lt-md="column"
      fxLayoutWrap
      fxLayoutGap="10px">
      <button md-raised-button type="button" class="btn-cancel-form text-upper" (click)="doCancel()">
        <md-icon color="primary">cancel</md-icon>
        <span class="cancel-name">Cancel</span>
      </button>
      <button md-raised-button type="button" class="btn-delete-form text-upper" (click)="doDelete()" *ngIf="user" [disabled]="!canDelete">
        <md-icon color="warn">delete</md-icon>
        <span class="delete-name">Delete</span>
      </button>
      <button
        md-raised-button
        color="accent"
        type="button"
        (click)="doSubmit()"
        class="btn-add-user-form text-upper"
        [disabled]="userManagementForm.invalid">
        <md-icon>{{ user ? 'done' : 'person_add' }}</md-icon>
        <span class="save-name">{{ user ? 'Save' : 'Add' }}</span>
      </button>
    </md-action-row>
  </div>
</form>
