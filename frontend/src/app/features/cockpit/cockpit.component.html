<!-- Copyright (C) 2017 Linagora

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. -->

<div class="page-cockpit" fxLayout="column" fxFill>
  <app-header [largeScreen]="isLargeScreen$ | async" [ui]="ui$ | async"
              [user]="user$ | async" [isDisconnecting]="isDisconnecting$ | async"
              [isOnWorkspace]="!!(workspace$ | async)"></app-header>

  <md-sidenav-container fxFlex (backdropClick)="closeSidenav()" (disableClose)="true">
    <md-sidenav fxLayout="column" *ngIf="workspace$ | async as workspace" [opened]="sidenavVisible$ | async" [mode]="sidenavMode$ | async">
      <div fxLayout="row">
        <button fxFlex="100" md-raised-button (click)="closeSidenavOnSmallScreen()" [routerLink]="['/workspaces', workspace.id]" class="workspace-name width-full no-border-radius text-upper" color="accent">
          {{ workspace.name }}
        </button>

        <button fxFlex md-raised-button (click)="openWorkspacesDialog()" class="change-workspace width-full no-border-radius" color="accent">
          <md-icon>view_list</md-icon>
        </button>
      </div>

      <md-tab-group fxFlex>
        <md-tab label="Petals">
          <app-petals-menu-view></app-petals-menu-view>
        </md-tab>

        <md-tab label="Service">
          Some more tab content
        </md-tab>

        <md-tab label="Api">
          Some more tab content
        </md-tab>
      </md-tab-group>
      <!--<router-outlet name="aux"></router-outlet>-->
    </md-sidenav>

    <router-outlet></router-outlet>
  </md-sidenav-container>
</div>
