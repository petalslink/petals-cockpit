<!-- Copyright (C) 2016 Linagora

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. -->

<div class="select-bus">
  <md-nav-list dense *ngFor="let bus of buses; let last=last; let index=index">
    <h3
      md-subheader
      *ngIf="index === 0 && workspace.busesInProgress.length > 0"
    >
      Available buses
    </h3>

    <a
      md-list-item
      (click)="getBusDetails(bus.id)"
      [routerLink]="['/', 'cockpit', 'workspaces', idWorkspaceSelected, 'petals', 'bus', bus.id]"
      class="bus"
      [class.color-primary-bold]="bus.id === idBusSelected"
    >
      <md-icon (click)="fold(bus.id)" [class.rotate-minus-90]="bus.isFolded">arrow_drop_down</md-icon>
      <span appColorSearchedLetters [search]="search" [text]="bus.name" classToApply="searched"></span>
    </a>

    <app-containers-menu
      *ngIf="!bus.isFolded"
      [containers]="bus.containers"
      [search]="search"

      [idBus]="bus.id"

      [idWorkspaceSelected]="idWorkspaceSelected"
      [idContainerSelected]="idContainerSelected"
      [idComponentSelected]="idComponentSelected"
      [idServiceUnitSelected]="idServiceUnitSelected"
    ></app-containers-menu>
  </md-nav-list>
</div>
