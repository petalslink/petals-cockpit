<div class="petals-component">

  <button
    md-mini-fab
    class="import-bus"
    color="primary"
    md-tooltip="Import a bus"
    tooltip-position="below"
    [routerLink]="['/cockpit', 'workspaces', workspace.id, 'petals', 'bus', 'import']"
  >
    <md-icon class="md-24">add</md-icon>
  </button>

  <md-input class="search" placeholder="Search" [(ngModel)]="workspace.searchPetals" (ngModelChange)="search(workspace.searchPetals)">
    <span md-suffix>
      <md-icon>search</md-icon>
    </span>
  </md-input>

  <md-nav-list dense *ngIf="workspace && workspace.busesInProgress && workspace.busesInProgress.length > 0">
    <h3 md-subheader>In progress</h3>
    <a
      md-list-item
      *ngFor="let bus of workspace.busesInProgress"
      [routerLink]="['/', 'cockpit', 'workspaces', workspace.id, 'petals', 'bus', bus.id]"
    >
      <div class="link-content">
        <div class="import-state">
          <div *ngIf="bus.importError && bus.importError !== ''" class="state-error">
            <md-icon class="md-24">warning</md-icon>
          </div>
          <div *ngIf="!bus.importError || bus.importError === ''" class="state-pending">
            <md-progress-circle mode="indeterminate"></md-progress-circle>
          </div>
        </div>

        <div class="ip">
          {{ bus.config.ip }}
        </div>
      </div>
    </a>
  </md-nav-list>

  <app-buses-menu
    *ngIf="workspace && workspace.buses"

    [workspace]="workspace"
    [buses]="workspace.buses"
    [search]="workspace.searchPetals"

    [idWorkspaceSelected]="workspace.id"
    [idBusSelected]="workspace.selectedBusId"
    [idContainerSelected]="workspace.selectedContainerId"
    [idComponentSelected]="workspace.selectedComponentId"
    [idServiceUnitSelected]="workspace.selectedServiceUnitId"
  >
  </app-buses-menu>
</div>
