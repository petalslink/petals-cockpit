<!-- Copyright (C) 2016 Linagora

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU Affero General Public License as
published by the Free Software Foundation, either version 3 of the
License, or (at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU Affero General Public License for more details.

You should have received a copy of the GNU Affero General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>. -->

<md-toolbar color="primary">
  <app-toggle-sidenav></app-toggle-sidenav>
  <span>Petals</span>
  <md-icon>chevron_right</md-icon>
  <span class="color-accent-bold" *ngIf="serviceUnit">{{ serviceUnit.name }}</span>

  <span flex></span>

  <button md-icon-button [md-menu-trigger-for]="menu">
    <md-icon>more_vert</md-icon>
  </button>

  <md-menu x-position="before" #menu="mdMenu">
    <button md-menu-item>
      Overview
    </button>
    <button md-menu-item>
      Operation
    </button>
    <button md-menu-item>
      Config
    </button>
    <button md-menu-item>
      Flow
    </button>
    <button md-menu-item>
      Monitor
    </button>
    <button md-menu-item>
      Log
    </button>
    <button md-menu-item>
      User
    </button>
  </md-menu>
</md-toolbar>

<md-tab-group>
    <md-tab label="Overview">

      <md-card class="central-content" *ngIf="serviceUnit">
        <md-card-title align="center">
          <md-progress-circle *ngIf="serviceUnit.isFetchingDetails" mode="indeterminate"></md-progress-circle>

          Service Unit content
        </md-card-title>

        <md-card-content>
          <ul>
            <li *ngIf="serviceUnit.id"><b>id</b> : {{ serviceUnit.id }}</li>
            <li *ngIf="serviceUnit.name"><b>name</b> : {{ serviceUnit.name }}</li>
            <li *ngIf="serviceUnit.state" class="state">
              <b>state</b> : <span class="current-state">{{ serviceUnit.state }}</span>

              <span *ngIf="serviceUnit.state">
                <span *ngIf="serviceUnit.state === 'Started'">
                  <button md-raised-button color="accent" type="text" class="stop" (click)="editState('Stopped')" [disabled]="serviceUnit.isUpdatingState">Stop</button>
                </span>

                <span *ngIf="serviceUnit.state === 'Shutdown'">
                  <button md-raised-button color="primary" type="text" class="start" (click)="editState('Stared')" [disabled]="serviceUnit.isUpdatingState">Start</button>
                  <button md-raised-button color="warn" type="text" class="unload" (click)="editState('Unloaded')" [disabled]="serviceUnit.isUpdatingState">Unload</button>
                </span>

                <span *ngIf="serviceUnit.state === 'Stopped'">
                  <button md-raised-button color="primary" type="text" class="start" (click)="editState('Started')" [disabled]="serviceUnit.isUpdatingState">Start</button>
                  <button md-raised-button color="warn" type="text" class="unload" (click)="editState('Unloaded')" [disabled]="serviceUnit.isUpdatingState">Unload</button>
                </span>
              </span>
            </li>
          </ul>
        </md-card-content>
      </md-card>

    </md-tab>
</md-tab-group>
